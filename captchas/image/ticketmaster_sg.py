from requests import post
from base64 import b64decode

if __name__ == "__main__":
    API_KEY = "TAKION_API_XXX" # Fill it with your api key

    # Since on ticketmaster sg a captcha is assigned to your
    # session only after some actions are taken (like adding to cart)
    # we are going to set the value as fixed, in a real case scenario
    # you wanna convert the image to base64 and then send to the API
    b64image = "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"
    result = post(
        "https://takionapi.tech/ocr",
        json={
            "image": b64image
        },
        headers={
            "x-api-key": API_KEY
        }
    ).json()
    if (error := result.get("error")):
        print(error)
        exit(0)
    print(f"Solved! {result['result']}")

    # Save image for debugging
    with open("tmsg.png", "wb") as fh:
        fh.write(b64decode(b64image))